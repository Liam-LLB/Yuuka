From 0e10afb91273a39ea6106428a4188bc66811ed95 Mon Sep 17 00:00:00 2001
From: Liam-LLB <liamleclaircie@gmail.com>
Date: Thu, 22 Jan 2026 06:40:34 +0100
Subject: [PATCH 2/4] Add Yuukaphotos page with Firebase upload

---
 .env.example |   6 +
 bouton8.html | 466 +++++++++++++++++++++++++++++++++++++++++++++++++++
 index.html   |  15 ++
 photos.js    | 216 ++++++++++++++++++++++++
 4 files changed, 703 insertions(+)
 create mode 100644 .env.example
 create mode 100644 bouton8.html
 create mode 100644 photos.js

diff --git a/.env.example b/.env.example
new file mode 100644
index 0000000..6616bc1
--- /dev/null
+++ b/.env.example
@@ -0,0 +1,6 @@
+NEXT_PUBLIC_FIREBASE_API_KEY=
+NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=
+NEXT_PUBLIC_FIREBASE_PROJECT_ID=
+NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=
+NEXT_PUBLIC_FIREBASE_APP_ID=
+NEXT_PUBLIC_DEMO_OWNER_ID=demo-user
diff --git a/bouton8.html b/bouton8.html
new file mode 100644
index 0000000..1e38bd9
--- /dev/null
+++ b/bouton8.html
@@ -0,0 +1,466 @@
+<!DOCTYPE html>
+<html lang="fr">
+<head>
+  <meta charset="UTF-8" />
+  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
+  <title>Yuukaphotos - Photos</title>
+  <link rel="stylesheet" href="styles.css" />
+  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
+  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
+  <style>
+    :root {
+      --bg: #07090f;
+      --bg-soft: #0f172a;
+      --panel: rgba(15, 23, 42, 0.82);
+      --card: rgba(30, 41, 59, 0.75);
+      --muted: #94a3b8;
+      --text: #e2e8f0;
+      --accent: #a78bfa;
+      --accent-2: #60a5fa;
+      --border: rgba(148, 163, 184, 0.22);
+      --success: #22c55e;
+      --danger: #f87171;
+    }
+
+    * { box-sizing: border-box; }
+
+    body {
+      margin: 0;
+      background:
+        radial-gradient(circle at 20% 10%, rgba(96, 165, 250, 0.15), transparent 35%),
+        radial-gradient(circle at 85% 15%, rgba(168, 85, 247, 0.18), transparent 30%),
+        radial-gradient(circle at 20% 85%, rgba(34, 197, 94, 0.12), transparent 32%),
+        linear-gradient(135deg, var(--bg) 0%, var(--bg-soft) 55%, var(--bg) 100%);
+      color: var(--text);
+      font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;
+      min-height: 100vh;
+    }
+
+    .photos-shell {
+      min-height: 100vh;
+      display: flex;
+      flex-direction: column;
+      position: relative;
+      padding-bottom: 90px;
+    }
+
+    .photos-header {
+      position: sticky;
+      top: 0;
+      z-index: 10;
+      backdrop-filter: blur(16px);
+      background: rgba(7, 9, 15, 0.75);
+      border-bottom: 1px solid var(--border);
+    }
+
+    .photos-header-inner {
+      display: flex;
+      align-items: center;
+      justify-content: space-between;
+      padding: 18px 24px;
+      gap: 16px;
+    }
+
+    .photos-title {
+      display: flex;
+      flex-direction: column;
+    }
+
+    .photos-title span {
+      font-size: 12px;
+      letter-spacing: 0.16em;
+      text-transform: uppercase;
+      color: var(--muted);
+    }
+
+    .photos-title strong {
+      font-size: 24px;
+      font-weight: 700;
+    }
+
+    .photos-actions {
+      display: flex;
+      gap: 12px;
+      align-items: center;
+    }
+
+    .pill-btn {
+      border: 1px solid var(--border);
+      background: rgba(255, 255, 255, 0.05);
+      color: var(--text);
+      padding: 8px 14px;
+      border-radius: 999px;
+      font-size: 13px;
+      display: inline-flex;
+      align-items: center;
+      gap: 8px;
+      cursor: pointer;
+      transition: transform 0.2s ease, border 0.2s ease;
+    }
+
+    .pill-btn:hover {
+      transform: translateY(-1px);
+      border-color: rgba(255, 255, 255, 0.35);
+    }
+
+    .avatar {
+      width: 34px;
+      height: 34px;
+      border-radius: 50%;
+      border: 1px solid var(--border);
+      background: linear-gradient(135deg, rgba(168, 85, 247, 0.5), rgba(96, 165, 250, 0.6));
+      display: grid;
+      place-items: center;
+      font-size: 14px;
+    }
+
+    .photos-content {
+      padding: 18px 20px 40px;
+    }
+
+    .photos-meta {
+      display: grid;
+      gap: 8px;
+      margin-bottom: 18px;
+    }
+
+    .photos-meta p {
+      margin: 0;
+      color: var(--muted);
+      font-size: 14px;
+    }
+
+    .grid-shell {
+      display: grid;
+      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
+      gap: 10px;
+    }
+
+    .photo-tile {
+      position: relative;
+      border-radius: 14px;
+      overflow: hidden;
+      aspect-ratio: 1 / 1;
+      border: 1px solid rgba(255, 255, 255, 0.1);
+      background: rgba(255, 255, 255, 0.04);
+      box-shadow: 0 16px 35px rgba(0, 0, 0, 0.35);
+      cursor: pointer;
+      transform-style: preserve-3d;
+      transition: transform 0.15s ease, box-shadow 0.2s ease;
+    }
+
+    .photo-tile img {
+      width: 100%;
+      height: 100%;
+      object-fit: cover;
+      transition: transform 0.2s ease;
+    }
+
+    .photo-tile:hover img {
+      transform: scale(1.05);
+    }
+
+    .empty-state {
+      padding: 40px 32px;
+      border-radius: 20px;
+      border: 1px solid var(--border);
+      background: rgba(15, 23, 42, 0.55);
+      display: grid;
+      gap: 12px;
+    }
+
+    .empty-state h3 {
+      margin: 0;
+      font-size: 20px;
+    }
+
+    .empty-state p {
+      margin: 0;
+      color: var(--muted);
+      font-size: 14px;
+    }
+
+    .add-button {
+      position: fixed;
+      right: 22px;
+      bottom: 92px;
+      border: 1px solid var(--border);
+      background: rgba(255, 255, 255, 0.1);
+      color: var(--text);
+      padding: 12px 18px;
+      border-radius: 999px;
+      font-weight: 600;
+      cursor: pointer;
+      display: flex;
+      align-items: center;
+      gap: 8px;
+      box-shadow: 0 20px 30px rgba(0, 0, 0, 0.3);
+      backdrop-filter: blur(12px);
+    }
+
+    .upload-sheet {
+      position: fixed;
+      inset: 0;
+      z-index: 30;
+      display: none;
+    }
+
+    .upload-sheet.active {
+      display: block;
+    }
+
+    .sheet-backdrop {
+      position: absolute;
+      inset: 0;
+      background: rgba(0, 0, 0, 0.65);
+    }
+
+    .sheet-panel {
+      position: absolute;
+      left: 0;
+      right: 0;
+      bottom: 0;
+      background: rgba(8, 12, 22, 0.95);
+      border-top-left-radius: 28px;
+      border-top-right-radius: 28px;
+      border-top: 1px solid var(--border);
+      padding: 20px 24px 28px;
+      display: grid;
+      gap: 16px;
+      backdrop-filter: blur(14px);
+    }
+
+    .sheet-handle {
+      width: 48px;
+      height: 5px;
+      border-radius: 999px;
+      background: rgba(255, 255, 255, 0.2);
+      margin: 0 auto;
+    }
+
+    .sheet-title {
+      display: flex;
+      align-items: center;
+      justify-content: space-between;
+      font-weight: 600;
+    }
+
+    .sheet-title button {
+      background: transparent;
+      border: none;
+      color: var(--muted);
+      cursor: pointer;
+    }
+
+    .sheet-input,
+    .sheet-select {
+      border-radius: 14px;
+      border: 1px solid var(--border);
+      background: rgba(255, 255, 255, 0.04);
+      color: var(--text);
+      padding: 12px 14px;
+      width: 100%;
+      font-size: 14px;
+    }
+
+    .sheet-cta {
+      border-radius: 16px;
+      padding: 12px 16px;
+      font-weight: 700;
+      border: none;
+      background: linear-gradient(135deg, #ffffff, #cbd5f5);
+      color: #0f172a;
+      cursor: pointer;
+    }
+
+    .sheet-note {
+      font-size: 12px;
+      color: var(--muted);
+    }
+
+    .viewer {
+      position: fixed;
+      inset: 0;
+      z-index: 40;
+      background: #03050b;
+      display: none;
+    }
+
+    .viewer.active {
+      display: block;
+    }
+
+    .viewer-toolbar {
+      position: absolute;
+      top: 0;
+      left: 0;
+      right: 0;
+      padding: 18px 22px;
+      display: flex;
+      justify-content: space-between;
+      align-items: center;
+      border-bottom: 1px solid var(--border);
+      background: rgba(3, 5, 11, 0.65);
+      backdrop-filter: blur(12px);
+    }
+
+    .viewer-toolbar button {
+      background: transparent;
+      border: none;
+      color: var(--text);
+      font-size: 14px;
+      cursor: pointer;
+    }
+
+    .viewer-toolbar .danger {
+      color: var(--danger);
+    }
+
+    .viewer-media {
+      width: 100%;
+      height: 100%;
+      display: grid;
+      place-items: center;
+      padding: 60px 24px 24px;
+    }
+
+    .viewer-media img {
+      max-width: 100%;
+      max-height: 100%;
+      border-radius: 16px;
+      box-shadow: 0 24px 50px rgba(0, 0, 0, 0.5);
+    }
+
+    .bottom-nav {
+      position: fixed;
+      left: 0;
+      right: 0;
+      bottom: 0;
+      z-index: 5;
+      background: rgba(7, 9, 15, 0.85);
+      border-top: 1px solid var(--border);
+      backdrop-filter: blur(16px);
+    }
+
+    .bottom-nav .nav-grid {
+      display: grid;
+      grid-template-columns: repeat(4, 1fr);
+      text-align: center;
+      font-size: 12px;
+      color: var(--muted);
+    }
+
+    .bottom-nav a {
+      text-decoration: none;
+      color: inherit;
+      padding: 14px 10px;
+      display: grid;
+      gap: 4px;
+      font-weight: 500;
+    }
+
+    .bottom-nav a.active {
+      color: var(--text);
+    }
+
+    @media (max-width: 640px) {
+      .photos-header-inner {
+        padding: 16px 18px;
+      }
+
+      .photos-content {
+        padding: 16px 16px 40px;
+      }
+
+      .grid-shell {
+        grid-template-columns: repeat(3, minmax(0, 1fr));
+      }
+    }
+  </style>
+</head>
+<body data-page="Photos">
+  <main class="photos-shell">
+    <header class="photos-header">
+      <div class="photos-header-inner">
+        <div class="photos-title">
+          <span>Collection privée</span>
+          <strong>Photos</strong>
+        </div>
+        <div class="photos-actions">
+          <button class="pill-btn" type="button"><i class="fa-solid fa-magnifying-glass"></i> Rechercher</button>
+          <div class="avatar"><i class="fa-solid fa-user"></i></div>
+        </div>
+      </div>
+    </header>
+
+    <section class="photos-content">
+      <div class="photos-meta">
+        <p>Synchronisé avec Firebase Storage + Firestore · Effet 3D léger sur les vignettes.</p>
+        <p id="firebaseStatus">Connexion Firebase : en attente.</p>
+      </div>
+
+      <div id="emptyState" class="empty-state" hidden>
+        <h3>Aucune photo pour l'instant</h3>
+        <p>Ajoute des images via le bouton + Add pour remplir ta grille.</p>
+      </div>
+
+      <div id="photoGrid" class="grid-shell" aria-live="polite"></div>
+    </section>
+  </main>
+
+  <button class="add-button" id="openUploader" type="button">
+    <i class="fa-solid fa-plus"></i> Add
+  </button>
+
+  <div class="upload-sheet" id="uploadSheet" aria-hidden="true">
+    <div class="sheet-backdrop" id="sheetBackdrop"></div>
+    <div class="sheet-panel">
+      <div class="sheet-handle"></div>
+      <div class="sheet-title">
+        <span>Importer</span>
+        <button type="button" id="closeUploader">Fermer</button>
+      </div>
+      <label class="sheet-label" for="albumSelect">Album</label>
+      <select id="albumSelect" class="sheet-select">
+        <option value="">Toutes les photos</option>
+        <option value="vacances">Vacances</option>
+        <option value="soirees">Soirées</option>
+      </select>
+      <input id="photoInput" class="sheet-input" type="file" accept="image/*" multiple />
+      <button class="sheet-cta" id="uploadBtn" type="button">Choisir des photos</button>
+      <p class="sheet-note">Stockage: Firebase Storage · Métadonnées: Firestore</p>
+    </div>
+  </div>
+
+  <div class="viewer" id="viewer" aria-hidden="true">
+    <div class="viewer-toolbar">
+      <button type="button" id="closeViewer">Fermer</button>
+      <button class="danger" type="button" id="deletePhoto">Supprimer</button>
+    </div>
+    <div class="viewer-media">
+      <img id="viewerImage" src="" alt="Photo" />
+    </div>
+  </div>
+
+  <nav class="bottom-nav">
+    <div class="nav-grid">
+      <a href="bouton8.html" class="active"><i class="fa-regular fa-images"></i> Photos</a>
+      <a href="bouton1.html"><i class="fa-solid fa-layer-group"></i> Albums</a>
+      <a href="bouton2.html"><i class="fa-solid fa-magnifying-glass"></i> Search</a>
+      <a href="bouton3.html"><i class="fa-solid fa-user"></i> Profile</a>
+    </div>
+  </nav>
+
+  <script>
+    window.YUUKA_FIREBASE_CONFIG = {
+      apiKey: "",
+      authDomain: "",
+      projectId: "",
+      storageBucket: "",
+      appId: "",
+    };
+    window.YUUKA_DEMO_OWNER_ID = "demo-user";
+  </script>
+  <script type="module" src="photos.js"></script>
+</body>
+</html>
diff --git a/index.html b/index.html
index 2fc5c9c..d667ab3 100644
--- a/index.html
+++ b/index.html
@@ -59,6 +59,12 @@
             <span class="hero-icon-desc">Mini-défis</span>
             <span class="hero-icon-arrow" aria-hidden="true"><i class="fa-solid fa-arrow-up-right"></i></span>
           </a>
+          <a class="hero-icon-card" href="bouton8.html">
+            <span class="hero-icon"><i class="fa-regular fa-images"></i></span>
+            <span class="hero-icon-label">Yuukaphotos</span>
+            <span class="hero-icon-desc">Galerie iOS</span>
+            <span class="hero-icon-arrow" aria-hidden="true"><i class="fa-solid fa-arrow-up-right"></i></span>
+          </a>
         </div>
         <div class="tabs">
           <button class="btn" type="button" data-account-trigger><i class="fa-solid fa-right-to-bracket"></i> Ouvrir l'espace compte</button>
@@ -152,6 +158,15 @@
           <span class="showcase-desc">Progression, scores et sensations instantanées.</span>
           <span class="showcase-cta">Jouer <i class="fa-solid fa-arrow-right"></i></span>
         </a>
+        <a class="showcase-card" href="bouton8.html">
+          <span class="showcase-top">
+            <span class="showcase-icon"><i class="fa-regular fa-images"></i></span>
+            <span class="showcase-label">Yuukaphotos</span>
+          </span>
+          <span class="showcase-title">Photos premium</span>
+          <span class="showcase-desc">Grille dense, upload rapide et viewer immersif.</span>
+          <span class="showcase-cta">Ouvrir <i class="fa-solid fa-arrow-right"></i></span>
+        </a>
       </div>
 
       <div class="showcase-header alt">
diff --git a/photos.js b/photos.js
new file mode 100644
index 0000000..52684b8
--- /dev/null
+++ b/photos.js
@@ -0,0 +1,216 @@
+const firebaseConfig = window.YUUKA_FIREBASE_CONFIG || null;
+const ownerId = window.YUUKA_DEMO_OWNER_ID || "demo-user";
+
+const firebaseStatus = document.getElementById("firebaseStatus");
+const emptyState = document.getElementById("emptyState");
+const photoGrid = document.getElementById("photoGrid");
+const openUploader = document.getElementById("openUploader");
+const uploadSheet = document.getElementById("uploadSheet");
+const sheetBackdrop = document.getElementById("sheetBackdrop");
+const closeUploader = document.getElementById("closeUploader");
+const photoInput = document.getElementById("photoInput");
+const uploadBtn = document.getElementById("uploadBtn");
+const albumSelect = document.getElementById("albumSelect");
+const viewer = document.getElementById("viewer");
+const viewerImage = document.getElementById("viewerImage");
+const closeViewer = document.getElementById("closeViewer");
+const deletePhotoBtn = document.getElementById("deletePhoto");
+
+let app = null;
+let db = null;
+let storage = null;
+let firestoreApi = null;
+let storageApi = null;
+let activePhotoId = null;
+let activePhotoUrl = null;
+let uploading = false;
+
+function setStatus(message, ok = true) {
+  firebaseStatus.textContent = message;
+  firebaseStatus.style.color = ok ? "#a5b4fc" : "#fca5a5";
+}
+
+function toggleSheet(open) {
+  uploadSheet.classList.toggle("active", open);
+  uploadSheet.setAttribute("aria-hidden", String(!open));
+}
+
+function toggleViewer(open) {
+  viewer.classList.toggle("active", open);
+  viewer.setAttribute("aria-hidden", String(!open));
+}
+
+function updateEmptyState() {
+  const hasPhotos = photoGrid.children.length > 0;
+  emptyState.hidden = hasPhotos;
+}
+
+function createTile(photo) {
+  const button = document.createElement("button");
+  button.type = "button";
+  button.className = "photo-tile";
+
+  const img = document.createElement("img");
+  img.src = photo.downloadUrl;
+  img.alt = "";
+  img.loading = "lazy";
+
+  button.appendChild(img);
+
+  button.addEventListener("mousemove", (event) => {
+    const rect = button.getBoundingClientRect();
+    const x = (event.clientX - rect.left) / rect.width;
+    const y = (event.clientY - rect.top) / rect.height;
+    const rotY = (x - 0.5) * 10;
+    const rotX = (0.5 - y) * 10;
+    button.style.transform = `perspective(900px) rotateX(${rotX}deg) rotateY(${rotY}deg) translateZ(8px)`;
+  });
+
+  button.addEventListener("mouseleave", () => {
+    button.style.transform = "perspective(900px) rotateX(0deg) rotateY(0deg) translateZ(0px)";
+  });
+
+  button.addEventListener("click", () => {
+    activePhotoId = photo.id;
+    activePhotoUrl = photo.downloadUrl;
+    viewerImage.src = activePhotoUrl;
+    toggleViewer(true);
+  });
+
+  return button;
+}
+
+async function listLatestPhotos(max = 160) {
+  const photosRef = firestoreApi.collection(db, "photos");
+  const q = firestoreApi.query(
+    photosRef,
+    firestoreApi.where("ownerId", "==", ownerId),
+    firestoreApi.where("isDeleted", "==", false),
+    firestoreApi.orderBy("createdAt", "desc"),
+    firestoreApi.limit(max)
+  );
+  const snapshot = await firestoreApi.getDocs(q);
+  return snapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() }));
+}
+
+async function refreshPhotos() {
+  if (!db) return;
+  photoGrid.innerHTML = "";
+  const photos = await listLatestPhotos(160);
+  photos.forEach((photo) => {
+    photoGrid.appendChild(createTile(photo));
+  });
+  updateEmptyState();
+}
+
+async function uploadPhotos(files, albumId) {
+  for (const file of files) {
+    const docRef = await firestoreApi.addDoc(
+      firestoreApi.collection(db, "photos"),
+      {
+        ownerId,
+        albumId,
+        storagePath: "",
+        downloadUrl: "",
+        createdAt: firestoreApi.serverTimestamp(),
+        tags: [],
+        isDeleted: false,
+        deletedAt: null,
+        bytes: file.size,
+      }
+    );
+
+    const storagePath = `users/${ownerId}/photos/${docRef.id}/original`;
+    const storageRef = storageApi.ref(storage, storagePath);
+
+    await new Promise((resolve, reject) => {
+      const task = storageApi.uploadBytesResumable(storageRef, file);
+      task.on("state_changed", undefined, reject, () => resolve());
+    });
+
+    const downloadUrl = await storageApi.getDownloadURL(storageRef);
+    await firestoreApi.updateDoc(firestoreApi.doc(db, "photos", docRef.id), {
+      storagePath,
+      downloadUrl,
+    });
+  }
+}
+
+async function softDeletePhoto(photoId) {
+  await firestoreApi.updateDoc(firestoreApi.doc(db, "photos", photoId), {
+    isDeleted: true,
+    deletedAt: firestoreApi.serverTimestamp(),
+  });
+}
+
+async function initFirebase() {
+  if (!firebaseConfig || !firebaseConfig.apiKey) {
+    setStatus("Ajoute tes identifiants Firebase dans bouton8.html pour activer la synchronisation.", false);
+    updateEmptyState();
+    return;
+  }
+
+  const [{ initializeApp }, firestoreModule, storageModule] = await Promise.all([
+    import("https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"),
+    import("https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"),
+    import("https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js"),
+  ]);
+
+  firestoreApi = firestoreModule;
+  storageApi = storageModule;
+
+  app = initializeApp(firebaseConfig);
+  db = firestoreModule.getFirestore(app);
+  storage = storageModule.getStorage(app);
+
+  setStatus("Connexion Firebase : active.");
+  await refreshPhotos();
+}
+
+openUploader.addEventListener("click", () => toggleSheet(true));
+closeUploader.addEventListener("click", () => !uploading && toggleSheet(false));
+sheetBackdrop.addEventListener("click", () => !uploading && toggleSheet(false));
+
+uploadBtn.addEventListener("click", () => photoInput.click());
+
+photoInput.addEventListener("change", async (event) => {
+  if (!db || uploading) return;
+  const files = Array.from(event.target.files || []);
+  if (!files.length) return;
+  uploading = true;
+  uploadBtn.textContent = "Upload...";
+  try {
+    await uploadPhotos(files, albumSelect.value || null);
+    toggleSheet(false);
+    await refreshPhotos();
+  } finally {
+    uploading = false;
+    uploadBtn.textContent = "Choisir des photos";
+    photoInput.value = "";
+  }
+});
+
+closeViewer.addEventListener("click", () => {
+  toggleViewer(false);
+  activePhotoId = null;
+  activePhotoUrl = null;
+});
+
+window.addEventListener("keydown", (event) => {
+  if (event.key === "Escape" && viewer.classList.contains("active")) {
+    toggleViewer(false);
+    activePhotoId = null;
+    activePhotoUrl = null;
+  }
+});
+
+deletePhotoBtn.addEventListener("click", async () => {
+  if (!activePhotoId || !db) return;
+  await softDeletePhoto(activePhotoId);
+  toggleViewer(false);
+  activePhotoId = null;
+  activePhotoUrl = null;
+  await refreshPhotos();
+});
+
+initFirebase();
-- 
2.43.0

